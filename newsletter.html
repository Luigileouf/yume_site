<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Inscription à la newsletter — YUME</title>
  <meta name="description" content="Recevez les actus YUME : lancement, partenariats, coulisses des athlètes.">
  <meta name="theme-color" content="#ffffff" />
  <meta name="color-scheme" content="light only" />
  <link rel="icon" href="/favicon.ico" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Fonts & skin luxe (même que le site) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="yume_luxe_nb.css">

  <style>
    /* Couche visuelle JPG-like : sobre, air, contrastes doux */
    body{color:#111}
    .wrap{max-width:920px;margin:auto;padding:64px 20px}
    .jp-title{font-family:"Playfair Display",ui-serif,Georgia,serif;text-transform:uppercase;letter-spacing:.22em}
    .jp-kicker{font-size:10px;letter-spacing:.3em;text-transform:uppercase;color:#9a9a9a;display:inline-flex;align-items:center;gap:10px}
    .jp-rule{width:28px;height:1px;background:rgba(0,0,0,.14);display:inline-block}
    .jp-card{border:1px solid rgba(0,0,0,.14);border-radius:22px;background:#fff;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .btn-ink{border-radius:999px;border:1px solid rgba(0,0,0,.18);background:#111;color:#fff;font-weight:600}
    .btn-ink:hover{filter:contrast(1.08)}
    .jp-hint{color:#666;font-size:.9rem}
    .jp-input{border-radius:999px;padding:.95rem 1.1rem}
    .jp-area{border-radius:22px;padding:1rem 1.1rem;min-height:120px}
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease,transform .6s ease}
    .reveal.in-view{opacity:1;transform:none}
    
    .brand-typewriter-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-family: "Playfair Display", serif;
      letter-spacing: .25em;
      text-transform: uppercase;
      font-size: 13px;
      font-weight: 700;
    }
    .brand-typewriter-text {
      color: #111;
      font-size: 10px;
      font-weight: 600;
      min-width: 200px;
      white-space: nowrap;
    }
    .brand-typewriter-cursor {
      color: #b39545;
      animation: newsletter-blink 1s step-end infinite;
      font-weight: 700;
    }
    @keyframes newsletter-blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    @media (max-width: 767px) {
      .brand-typewriter-text {
        min-width: 150px;
        font-size: 8px;
      }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <!-- En-tête -->
    <header class="text-center mb-5 reveal">
      <div class="jp-kicker mb-2"><span class="jp-rule"></span>Newsletter</div>
      <h1 class="jp-title mb-3" style="font-size:28px;">Rejoignez le mouvement</h1>
      <p class="mx-auto" style="max-width:700px">
        Lancement, partenaires, coulisses des athlètes : recevez l’essentiel, pas de spam.
      </p>
    </header>

    <!-- Carte formulaire -->
    <section class="jp-card p-4 p-md-5 reveal">
      <form id="formulaire-inscription" method="POST" action="https://luigileouf.pythonanywhere.com/submit">
        <div class="row g-4">
          <div class="col-md-6">
            <label for="nom" class="form-label">Prénom Nom</label>
            <input type="text" class="form-control jp-input" id="nom" name="nom" required>
          </div>
          <div class="col-md-6">
            <label for="email" class="form-label">Adresse email</label>
            <input type="email" class="form-control jp-input" id="email" name="email" required
                   inputmode="email" autocomplete="email" placeholder="votre@email.fr">
          </div>
          <div class="col-12">
            <label for="message" class="form-label">Message</label>
            <textarea class="form-control jp-area" id="message" name="message" rows="4" required
                      placeholder="Dites-nous ce que vous souhaitez recevoir (actus, partenaires, sport...)"></textarea>
            <div class="form-text jp-hint">3 champs — pas d’inscription complexe.</div>
          </div>
        </div>

        <div class="d-flex align-items-center gap-3 mt-4">
          <button type="submit" class="btn btn-ink px-4" id="submitBtn">Envoyer</button>
          <div class="text-success fw-semibold d-none" id="confirmation">✅ Merci, c’est bien envoyé !</div>
        </div>
      </form>
    </section>

    <!-- Mentions légères -->
    <p class="jp-hint text-center mt-4">
      En envoyant ce formulaire, vous acceptez de recevoir des nouvelles de YUME. Désinscription en 1 clic.
    </p>
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>

  <!-- Reveal & envoi Ajax (identique au flux existant) -->
  <script>
    // Reveal on scroll
    const io = new IntersectionObserver((entries)=>entries.forEach(e=>{
      if(e.isIntersecting){ e.target.classList.add('in-view'); io.unobserve(e.target); }
    }),{threshold:.15});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // Submit Ajax (préserve l'endpoint & champs)
    const form = document.getElementById("formulaire-inscription");
    const confirmation = document.getElementById("confirmation");
    const submitBtn = document.getElementById("submitBtn");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      submitBtn.disabled = true;
      const original = submitBtn.textContent;
      submitBtn.textContent = "Envoi…";

      try{
        const res = await fetch(form.action, { method: "POST", body: new FormData(form) });
        if(res.ok){
          form.reset();
          confirmation.classList.remove("d-none");
          confirmation.scrollIntoView({behavior:"smooth"});
        }else{
          alert("Une erreur est survenue. Réessayez.");
        }
      }catch(err){
        alert("Erreur réseau. Réessayez.");
      }finally{
        submitBtn.disabled = false;
        submitBtn.textContent = original;
      }
    });
  </script>

  <!-- Footer luxe minimal -->
<footer class="jp-footer">
  <div class="inner text-center">
    <div class="brand mb-3 brand-typewriter-wrapper">
      YUME <span class="brand-typewriter-text" id="newsletter-typewriter"></span><span class="brand-typewriter-cursor">|</span>
    </div>
    <div class="links">
      <a class="jp-link" href="index.html">Projet</a>
      <a class="jp-link" href="accueil.html">Plateforme</a>
      <a class="jp-link" href="media.html">Podcast</a>
    </div>
  </div>
</footer>

  <script>
    // ---- Effet typewriter pour le footer
    (function() {
      const phrases = [
        { text: 'POUR QU\'ILS CONTINUENT À NOUS FAIRE ', words: ['RÊVER', 'VIBRER', 'ESPÉRER'] },
        { text: '', words: ['PARCE QU\'ILS LE MÉRITENT'] },
        { text: '', words: ['OBJETS VENDUS ATHLÈTES SOUTENUS'] },
        { text: '', words: ['PLATEFORME DE SECONDE MAIN SOLIDAIRE'] }
      ];
      
      let phraseIndex = 0;
      let wordIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
      
      const typewriterEl = document.getElementById('newsletter-typewriter');
      if (!typewriterEl) {
        console.error('Element newsletter-typewriter not found');
        return;
      }
      
      const typingSpeed = 100;
      const deletingSpeed = 70;
      const pauseAfterWord = 2000;
      const pauseBeforeType = 300;
      const pauseBeforePhrase = 800;

      function typeWriter() {
        const currentPhrase = phrases[phraseIndex];
        const currentWord = currentPhrase.words[wordIndex];
        const fullText = currentPhrase.text + currentWord;
        
        if (isDeleting) {
          const displayText = fullText.substring(0, currentPhrase.text.length + charIndex - 1);
          typewriterEl.textContent = displayText;
          charIndex--;
          
          if (charIndex === 0) {
            isDeleting = false;
            wordIndex++;
            
            if (wordIndex >= currentPhrase.words.length) {
              wordIndex = 0;
              phraseIndex = (phraseIndex + 1) % phrases.length;
              setTimeout(typeWriter, pauseBeforePhrase);
              return;
            }
            
            setTimeout(typeWriter, pauseBeforeType);
            return;
          }
          setTimeout(typeWriter, deletingSpeed);
        } else {
          const displayText = fullText.substring(0, currentPhrase.text.length + charIndex + 1);
          typewriterEl.textContent = displayText;
          charIndex++;
          
          if (charIndex === currentWord.length) {
            isDeleting = true;
            setTimeout(typeWriter, pauseAfterWord);
            return;
          }
          setTimeout(typeWriter, typingSpeed);
        }
      }

      setTimeout(typeWriter, pauseBeforeType);
    })();
  </script>

</body>
</html>
